<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{TITLE}}</title>

  <!-- SEO Meta Tags -->
  <meta name="description" content="Harmon Bhasin - Computational Biology and Biosecurity">
  <meta name="robots" content="index, follow">

  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Highlight.js CSS -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github.min.css">

  <!-- KaTeX CSS for LaTeX -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="/favicon.png">

  <!-- Umami Analytics -->
  <script defer src="https://cloud.umami.is/script.js" data-website-id="27d21137-87c1-42a6-9f44-77815c153950"></script>

  <style>
    /* Custom prose styles */
    .prose {
      max-width: 100%;
      color: #1F2937;
    }
    .prose h1 {
      font-size: 2rem;
      margin-bottom: 1rem;
      font-weight: bold;
    }
    .prose h2 {
      font-size: 1.5rem;
      margin-bottom: 0.5rem;
      font-weight: bold;
    }
    .prose h3 {
      font-size: 1.25rem;
      margin-bottom: 0.5rem;
      font-weight: bold;
    }
    .prose a {
      color: #000;
      text-decoration: underline;
    }
    .prose a:hover {
      color: #2563EB;
    }
    .prose ul {
      list-style-type: disc;
      margin-left: 1.5rem;
      margin-bottom: 1rem;
    }
    .prose ol {
      list-style-type: decimal;
      margin-left: 1.5rem;
      margin-bottom: 1rem;
    }
    .prose p {
      margin-bottom: 1rem;
      margin-top: 1rem;
      line-height: 1.7;
    }
    .prose blockquote {
      font-style: italic;
      margin: 1.5em 0;
      padding: 0 1em;
      border-left: 4px solid #ccc;
      color: #4B5563;
    }
    .prose pre {
      background: #f6f8fa;
      padding: 1rem;
      border-radius: 0.375rem;
      overflow-x: auto;
      margin: 1rem 0;
    }
    .prose code {
      background: #f6f8fa;
      padding: 0.2em 0.4em;
      border-radius: 0.25rem;
      font-size: 0.875em;
    }
    .prose pre code {
      background: none;
      padding: 0;
    }
  </style>
</head>
<body class="bg-white">
  <!-- Header Navigation -->
  <header class="border-b">
    <nav class="max-w-6xl mx-auto px-4 py-4">
      <div class="flex justify-between items-center">
        <a href="/" class="text-xl font-bold">Harmon Bhasin</a>
        <div class="space-x-6">
          <a href="/" class="hover:text-blue-600">Home</a>
          <a href="/about" class="hover:text-blue-600">About</a>
          <a href="/blog" class="hover:text-blue-600">Blog</a>
          <a href="https://x.com/_harm0n" class="hover:text-blue-600">Twitter</a>
        </div>
      </div>
    </nav>
  </header>

  <!-- Main Content -->
  <main>
    {{CONTENT}}
  </main>

  <!-- Search and Filter JavaScript -->
  <script>
    // Search functionality
    const searchInput = document.getElementById('search-input');
    const postsContainer = document.getElementById('posts-container');
    const noResults = document.getElementById('no-results');

    if (searchInput) {
      searchInput.addEventListener('input', (e) => {
        const query = e.target.value.toLowerCase();
        const posts = document.querySelectorAll('.post-item');
        let visibleCount = 0;

        posts.forEach(post => {
          const title = post.querySelector('h2').textContent.toLowerCase();
          const description = post.querySelector('p').textContent.toLowerCase();
          const matches = title.includes(query) || description.includes(query);

          post.style.display = matches ? 'block' : 'none';
          if (matches) visibleCount++;
        });

        noResults.classList.toggle('hidden', visibleCount > 0);
      });
    }

    // Category filtering
    const categoryButtons = document.querySelectorAll('.category-filter');

    categoryButtons.forEach(button => {
      button.addEventListener('click', () => {
        const category = button.dataset.category;
        const posts = document.querySelectorAll('.post-item');

        // Update active button
        categoryButtons.forEach(btn => {
          btn.classList.remove('bg-blue-500', 'text-white');
          btn.classList.add('hover:bg-gray-100');
        });
        button.classList.add('bg-blue-500', 'text-white');
        button.classList.remove('hover:bg-gray-100');

        // Filter posts
        let visibleCount = 0;
        posts.forEach(post => {
          const categories = post.dataset.categories.split(',');
          const matches = category === 'all' || categories.includes(category);

          post.style.display = matches ? 'block' : 'none';
          if (matches) visibleCount++;
        });

        // Clear search when filtering by category
        if (searchInput) searchInput.value = '';
        noResults.classList.toggle('hidden', visibleCount > 0);
      });
    });

    // Support category filtering from URL parameters
    const urlParams = new URLSearchParams(window.location.search);
    const categoryParam = urlParams.get('category');
    if (categoryParam) {
      const button = document.querySelector(`[data-category="${categoryParam}"]`);
      if (button) button.click();
    }
  </script>
</body>
</html>
